import{a as e,B as s}from"./vant-6f4778bd.js";import"./vue-19a83c2d.js";import{_ as t}from"./index-35e1517f.js";import{q as a,J as o,K as r,O as c,Q as n,p as i,r as l,d as p,w as u,U as m,F as g,P as v,z as b,V as d,W as f,M as j,n as h,X as y,R as _}from"./@vue-08a86471.js";import{a as k}from"./axios-f09ad530.js";import"./@vant-45958eb3.js";import"./vconsole-1b502f12.js";import"./vue-router-db991658.js";import"./pinia-aff75d57.js";import"./vue-demi-c2e8e920.js";import"./pinia-plugin-persistedstate-4761f546.js";/* empty css                      */import"./lib-flexible-29152b4f.js";const x={class:"chat-right-container"},w={class:"chat-box"},q={class:"chat"},O=a({name:"ChatRight"}),L=t(Object.assign(O,{props:{chat:{type:Object,required:!0}},setup:s=>(t,a)=>{const l=e;return o(),r("div",x,[c("div",w,[c("p",q,n(s.chat.content),1)]),i(l,{class:"avatar-box",fit:"cover",round:"",src:(p="user.jpg",new URL(Object.assign({"/src/assets/images/qingyunke.jpg":"/vue-mobile/static/jpg/qingyunke-677372e9.jpg","/src/assets/images/robot.jpg":"/vue-mobile/static/jpg/robot-0cc365fd.jpg","/src/assets/images/user.jpg":"/vue-mobile/static/jpg/user-b6ba143b.jpg"})[`/src/assets/images/${p}`],self.location).href)},null,8,["src"])]);var p}}),[["__scopeId","data-v-55def404"],["__file","D:/code/vue-mobile/src/views/robot/components/chat-right.vue"]]),R={class:"chat-left-container"},P={class:"chat-box"},U=["innerHTML"],C=a({name:"ChatLeft"}),T=t(Object.assign(C,{props:{chat:{type:Object,required:!0}},setup:s=>(t,a)=>{const n=e;return o(),r("div",R,[i(n,{class:"avatar-box",fit:"cover",round:"",src:(l="qingyunke.jpg",new URL(Object.assign({"/src/assets/images/qingyunke.jpg":"/vue-mobile/static/jpg/qingyunke-677372e9.jpg","/src/assets/images/robot.jpg":"/vue-mobile/static/jpg/robot-0cc365fd.jpg","/src/assets/images/user.jpg":"/vue-mobile/static/jpg/user-b6ba143b.jpg"})[`/src/assets/images/${l}`],self.location).href)},null,8,["src"]),c("div",P,[c("p",{class:"chat",innerHTML:s.chat.content},null,8,U)])]);var l}}),[["__scopeId","data-v-6ca478e8"],["__file","D:/code/vue-mobile/src/views/robot/components/chat-left.vue"]]),z=k.create({baseURL:"http://api.qingyunke.com/",timeout:1e4});z.interceptors.request.use((e=>e),(e=>(console.log("请求错误==>",e),Promise.reject(e)))),z.interceptors.response.use((e=>200===e.status?Promise.resolve(e.data):Promise.reject(e)),(e=>(console.log("响应错误==>",e),Promise.reject(e))));const D={class:"common-container"},H={class:"chat-list"},I={class:"common-footer input-wrapper"},K=["onKeydown"],M=_("发送"),B=a({name:"Robot"}),E=t(Object.assign(B,{setup(e){const t=l(""),a=l(null),n=p([]),_=l(null);function k(e){13===e.keyCode&&w()}function x(){}function w(){if(t.value){!function(e){const s={role:"robot",type:"text",content:""};(function(e){return z({url:"/api.php",method:"get",params:e})})({key:"free",appid:"0",msg:e}).then((e=>{0===e.result&&(s.content=e.content.replace(/{br}/g,"</br>").replace(/\[/g,"【").replace(/\]/g,"】"),n.push(s))})).catch((()=>{s.content="正在学习中~",n.push(s)}))}(t.value);const e={role:"user",type:"text",content:t.value};n.push(e),setTimeout((()=>{t.value=""}),0),a.value.focus()}}return u(n,(()=>{h((()=>{_.value.scrollTo({top:_.value.scrollHeight,behavior:"smooth"})}))})),(e,l)=>{const p=s;return o(),r("div",D,[m(" 聊天内容 "),c("div",{ref_key:"chatEl",ref:_,class:"common-wrapper chat-wrapper"},[c("ul",H,[(o(!0),r(g,null,v(n,((e,s)=>(o(),r("li",{class:"chat-item",key:s},["user"===e.role?(o(),y(L,{key:0,chat:e},null,8,["chat"])):(o(),y(T,{key:1,chat:e},null,8,["chat"]))])))),128))])],512),m(" 输入区域 "),c("div",I,[b(c("textarea",{ref_key:"inputEl",ref:a,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),class:"textarea",placeholder:"请输入...",maxlength:"100",onKeydown:f(k,["enter"]),onBlur:x},null,40,K),[[d,t.value,void 0,{trim:!0}]]),i(p,{type:"primary",size:"small",round:"",class:"send-btn",onClick:w},{default:j((()=>[M])),_:1})])])}}}),[["__scopeId","data-v-a083618e"],["__file","D:/code/vue-mobile/src/views/robot/index.vue"]]);export{E as default};
