import{_ as e,o as t,c as a,h as s,t as n,a as r,u as o,d as c,v as l,x as u,y as i,z as p,A as m,F as h,q as g,B as d,C as f,D as y,E as v,w as b,G as j,f as k,H as x,J as _}from"./.pnpm-C5MItbDN.js";const w=""+new URL("../jpg/qingyunke-FvKMLN3H.jpg",import.meta.url).href,q=""+new URL("../jpg/user-ctTJ_jMZ.jpg",import.meta.url).href,L=e=>new URL(Object.assign({"/src/assets/images/qingyunke.jpg":w,"/src/assets/images/user.jpg":q})["/src/assets/images/".concat(e)],import.meta.url).href,C={class:"chat-user-container"},O={class:"chat-box"},U={class:"chat"},H=c({name:"ChatUser"}),M=e(Object.assign(H,{props:{chat:{type:Object,required:!0}},setup:e=>(c,u)=>{const i=l;return t(),a("div",C,[s("div",O,[s("p",U,n(e.chat.content),1)]),r(i,{class:"avatar-box",fit:"cover",round:"",src:o(L)("user.jpg")},null,8,["src"])])}}),[["__scopeId","data-v-93b53f80"]]),R={class:"chat-robot-container"},I={class:"chat-box"},T=["innerHTML"],P=c({name:"ChatRobot"}),Q=e(Object.assign(P,{props:{chat:{type:Object,required:!0}},setup:e=>(n,c)=>{const u=l;return t(),a("div",R,[r(u,{class:"avatar-box",fit:"cover",round:"",src:o(L)("qingyunke.jpg")},null,8,["src"]),s("div",I,[s("p",{class:"chat",innerHTML:e.chat.content},null,8,T)])])}}),[["__scopeId","data-v-c8ae163f"]]),z=u.create({baseURL:"/proxy-qingyunke"});z.interceptors.request.use((e=>(e.timeout||(e.timeout=1e4),e)),(e=>new Promise(((t,a)=>{console.log("请求错误==>",e),a(e)})))),z.interceptors.response.use((e=>new Promise(((t,a)=>{200===e.status?t(e.data):a(e)}))),(e=>new Promise(((t,a)=>{console.log("响应错误==>",e),a(e)}))));const F={getQingyunke:e=>(async({url:e,method:t,params:a,data:s,timeout:n})=>await z({url:e,method:t,params:a,data:s,timeout:n}))({url:"/api.php",method:"get",params:e,timeout:12e3})},J={class:"chat-container"},K={class:"chat-list"},A={class:"footer"},B=c({name:"Qingyunke"}),D=e(Object.assign(B,{setup(e){const n=i(""),c=i(null),l=p([]),u=i(null);function w(){if(n.value){const e={role:"user",type:"text",content:n.value};l.push(e),function(e){const t={role:"robot",type:"text",content:""},a={key:"free",appid:"0",msg:e};F.getQingyunke(a).then((e=>{0===e.result?t.content=e.content.replace(/{br}/g,"</br>").replace(/\[/g,"【").replace(/\]/g,"】"):t.content="正在学习中~"})).catch((()=>{t.content="出错了~"})).finally((()=>{l.push(t)}))}(n.value),n.value="",c.value.focus()}}function q(e){13===e.keyCode&&w()}return m(l,(()=>{_((()=>{u.value.scrollTo({top:u.value.scrollHeight,behavior:"smooth"})}))})),l.push({role:"robot",type:"text",content:"你好，我是菲菲智能聊天机器人。"}),(e,i)=>{const p=j;return t(),a("div",J,[s("main",{ref_key:"refChatMain",ref:u,class:"main"},[s("ul",K,[(t(!0),a(h,null,g(o(l),((e,s)=>(t(),a("li",{key:s,class:"chat-item"},["user"===e.role?(t(),k(M,{key:0,chat:e},null,8,["chat"])):(t(),k(Q,{key:1,chat:e},null,8,["chat"]))])))),128))])],512),s("footer",A,[d(s("textarea",{ref_key:"refInput",ref:c,"onUpdate:modelValue":i[0]||(i[0]=e=>y(n)?n.value=e:null),class:"textarea",placeholder:"请输入...",maxlength:"1000",onKeydown:v(q,["enter"])},null,544),[[f,o(n),void 0,{trim:!0}]]),r(p,{type:"primary",size:"small",class:"send-btn",onClick:w},{default:b((()=>[x("发送")])),_:1})])])}}}),[["__scopeId","data-v-ee777b78"]]);export{D as default};
