import"./vue-1f6e5082.js";import{r as e,a as t,g as n,d as o,c as l,b as r,p as a,i,m as s,w as c,n as u,e as d,f as g,h as f,j as p,k as v}from"./@vue-24fef1bc.js";import{u as m,a as b,C as h}from"./@vant-4b93985f.js";const y=Object.assign,x="undefined"!=typeof window;function S(e,t){const n=t.split(".");let o=e;return n.forEach((e=>{var t;o=null!=(t=o[e])?t:""})),o}const w=e=>Array.isArray(e)?e:[e],k=[Number,String],C={type:Boolean,default:!0},$=e=>({type:String,default:e}),B=e=>null!=e,z=e=>"function"==typeof e,P=e=>null!==e&&"object"==typeof e,A=e=>"number"==typeof e||/^\d+(\.\d+)?$/.test(e);function T(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function j(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function L(e){T(window,e),T(document.body,e)}const E=!!x&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());function I(e,t){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault(),t&&(e=>{e.stopPropagation()})(e)}function V(e){if(B(e))return A(e)?`${e}px`:String(e)}m();const M=/-(\w)/g,O=e=>e.replace(M,((e,t)=>t.toUpperCase()));function q(e,t,n){const o=e.indexOf(t);return-1===o?e:"-"===t&&0!==o?e.slice(0,o):e.slice(0,o+1)+e.slice(o).replace(n,"")}const{hasOwnProperty:D}=Object.prototype;function W(e,t){return Object.keys(t).forEach((n=>{!function(e,t,n){const o=t[n];B(o)&&(D.call(e,n)&&P(o)?e[n]=W(Object(e[n]),o):e[n]=o)}(e,t,n)})),e}const F=e("zh-CN"),H=t({"zh-CN":{name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",postal:"邮政编码",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",postalEmpty:"邮政编码不正确",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}}});var N={messages:()=>H[F.value],use(e,t){F.value=e,this.add({[e]:t})},add(e={}){W(H,e)}};function Z(e){const t=O(e)+".";return(e,...n)=>{const o=N.messages(),l=S(o,t+e)||S(o,e);return z(l)?l(...n):l}}function R(e,t){return t?"string"==typeof t?` ${e}--${t}`:Array.isArray(t)?t.reduce(((t,n)=>t+R(e,n)),""):Object.keys(t).reduce(((n,o)=>n+(t[o]?R(e,o):"")),""):""}function _(e){return(t,n)=>(t&&"string"!=typeof t&&(n=t,t=""),`${t=t?`${e}__${t}`:e}${R(t,n)}`)}function K(e){const t=`van-${e}`;return[t,_(t),Z(t)]}const U=Symbol("van-form");function X(e){return e.install=t=>{const{name:n}=e;t.component(n,e),t.component(O(`-${n}`),e)},e}const Y={to:[String,Object],url:String,replace:Boolean};function G(){const e=n().proxy;return()=>function({to:e,url:t,replace:n,$router:o}){e&&o?o[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}(e)}const[J,Q]=K("badge");const ee=X(o({name:J,props:{dot:Boolean,max:k,tag:$("div"),color:String,offset:Array,content:k,showZero:C,position:$("top-right")},setup(e,{slots:t}){const n=()=>{if(t.content)return!0;const{content:n,showZero:o}=e;return B(n)&&""!==n&&(o||0!==n)},o=()=>{const{dot:o,max:l,content:r}=e;if(!o&&n())return t.content?t.content():B(l)&&A(r)&&+r>l?`${l}+`:r},a=l((()=>{const n={background:e.color};if(e.offset){const[o,l]=e.offset;t.default?(n.top=V(l),n.right="number"==typeof o?V(-o):o.startsWith("-")?o.replace("-",""):`-${o}`):(n.marginTop=V(l),n.marginLeft=V(o))}return n})),i=()=>{if(n()||e.dot)return r("div",{class:Q([e.position,{dot:e.dot,fixed:!!t.default}]),style:a.value},[o()])};return()=>{if(t.default){const{tag:n}=e;return r(n,{class:Q("wrapper")},{default:()=>[t.default(),i()]})}return i()}}})),[te,ne]=K("config-provider"),oe=Symbol(te);o({name:te,props:{tag:$("div"),themeVars:Object,iconPrefix:String},setup(e,{slots:t}){const n=l((()=>{if(e.themeVars)return function(e){const t={};return Object.keys(e).forEach((n=>{var o;t[`--van-${o=n,o.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"")}`]=e[n]})),t}(e.themeVars)}));return a(oe,e),()=>r(e.tag,{class:ne(),style:n.value},{default:()=>{var e;return[null==(e=t.default)?void 0:e.call(t)]}})}});const[le,re]=K("icon");const ae=X(o({name:le,props:{dot:Boolean,tag:$("i"),name:String,size:k,badge:k,color:String,badgeProps:Object,classPrefix:String},setup(e,{slots:t}){const n=i(oe,null),o=l((()=>e.classPrefix||(null==n?void 0:n.iconPrefix)||re()));return()=>{const{tag:n,dot:l,name:a,size:i,badge:c,color:u}=e,d=(e=>null==e?void 0:e.includes("/"))(a);return r(ee,s({dot:l,tag:n,class:[o.value,d?"":`${o.value}-${a}`],style:{color:u,fontSize:V(i)},content:c},e.badgeProps),{default:()=>{var e;return[null==(e=t.default)?void 0:e.call(t),d&&r("img",{class:re("image"),src:a},null)]}})}}})),[ie,se]=K("loading"),ce=Array(12).fill(null).map(((e,t)=>r("i",{class:se("line",String(t+1))},null))),ue=r("svg",{class:se("circular"),viewBox:"25 25 50 50"},[r("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]);const de=X(o({name:ie,props:{size:k,type:$("circular"),color:String,vertical:Boolean,textSize:k,textColor:String},setup(e,{slots:t}){const n=l((()=>y({color:e.color},function(e){if(B(e)){if(Array.isArray(e))return{width:V(e[0]),height:V(e[1])};const t=V(e);return{width:t,height:t}}}(e.size)))),o=()=>{var n;if(t.default)return r("span",{class:se("text"),style:{fontSize:V(e.textSize),color:null!=(n=e.textColor)?n:e.color}},[t.default()])};return()=>{const{type:t,vertical:l}=e;return r("div",{class:se([t,{vertical:l}]),"aria-live":"polite","aria-busy":!0},[r("span",{class:se("spinner",t),style:n.value},["spinner"===t?ce:ue]),o()])}}})),[ge,fe]=K("button");const pe=X(o({name:ge,props:y({},Y,{tag:$("button"),text:String,icon:String,type:$("default"),size:$("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:$("button"),loadingSize:k,loadingText:String,loadingType:String,iconPosition:$("left")}),emits:["click"],setup(e,{emit:t,slots:n}){const o=G(),l=()=>e.loading?n.loading?n.loading():r(de,{size:e.loadingSize,type:e.loadingType,class:fe("loading")},null):n.icon?r("div",{class:fe("icon")},[n.icon()]):e.icon?r(ae,{name:e.icon,class:fe("icon"),classPrefix:e.iconPrefix},null):void 0,a=()=>{let t;if(t=e.loading?e.loadingText:n.default?n.default():e.text,t)return r("span",{class:fe("text")},[t])},i=()=>{const{color:t,plain:n}=e;if(t){const e={color:n?t:"white"};return n||(e.background=t),t.includes("gradient")?e.border=0:e.borderColor=t,e}},s=n=>{e.loading?I(n):e.disabled||(t("click",n),o())};return()=>{const{tag:t,type:n,size:o,block:c,round:u,plain:d,square:g,loading:f,disabled:p,hairline:v,nativeType:m,iconPosition:b}=e,h=[fe([n,o,{plain:d,block:c,round:u,square:g,loading:f,disabled:p,hairline:v}]),{"van-hairline--surround":v}];return r(t,{type:m,class:h,style:i(),disabled:p,onClick:s},{default:()=>[r("div",{class:fe("content")},["left"===b&&l(),a(),"right"===b&&l()])]})}}})),[ve,me]=K("cell"),be={icon:String,size:String,title:k,value:k,label:k,center:Boolean,isLink:Boolean,border:C,required:Boolean,iconPrefix:String,valueClass:null,labelClass:null,titleClass:null,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}};const he=X(o({name:ve,props:y({},be,Y),setup(e,{slots:t}){const n=G(),o=()=>{if(t.label||B(e.label))return r("div",{class:[me("label"),e.labelClass]},[t.label?t.label():e.label])},l=()=>{if(t.title||B(e.title))return r("div",{class:[me("title"),e.titleClass],style:e.titleStyle},[t.title?t.title():r("span",null,[e.title]),o()])},a=()=>{const n=t.value||t.default;if(n||B(e.value)){const o=t.title||B(e.title);return r("div",{class:[me("value",{alone:!o}),e.valueClass]},[n?n():r("span",null,[e.value])])}},i=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const t=e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return r(ae,{name:t,class:me("right-icon")},null)}};return()=>{var o,s;const{size:c,center:u,border:d,isLink:g,required:f}=e,p=null!=(o=e.clickable)?o:g,v={center:u,required:f,clickable:p,borderless:!d};return c&&(v[c]=!!c),r("div",{class:me(v),role:p?"button":void 0,tabindex:p?0:void 0,onClick:n},[t.icon?t.icon():e.icon?r(ae,{name:e.icon,class:me("left-icon"),classPrefix:e.iconPrefix},null):void 0,l(),a(),i(),null==(s=t.extra)?void 0:s.call(t)])}}}));function ye(e,t){return(!t.required||!function(e){return Array.isArray(e)?!e.length:0!==e&&!e}(e))&&!(t.pattern&&!t.pattern.test(String(e)))}function xe(e,t){return new Promise((n=>{const o=t.validator(e,t);var l;P(l=o)&&z(l.then)&&z(l.catch)?o.then(n):n(o)}))}function Se(e,t){const{message:n}=t;return z(n)?n(e,t):n||""}function we({target:e}){e.composing=!0}function ke({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Ce(e){return[...e].length}const[$e,Be]=K("field"),ze={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:k,formatter:Function,clearIcon:$("clear"),modelValue:(Pe="",{type:k,default:Pe}),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:$("focus"),formatTrigger:$("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}};var Pe;const Ae=X(o({name:$e,props:y({},be,ze,{rows:k,type:$("text"),rules:Array,autosize:[Boolean,Object],labelWidth:k,labelClass:null,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}}),emits:["blur","focus","clear","keypress","click-input","end-validate","start-validate","click-left-icon","click-right-icon","update:modelValue"],setup(o,{emit:i,slots:f}){const p=function(){const e=n(),{name:t="unknown"}=(null==e?void 0:e.type)||{};return t}(),v=t({status:"unvalidated",focused:!1,validateMessage:""}),m=e(),x=e(),{parent:S}=b(U),k=()=>{var e;return String(null!=(e=o.modelValue)?e:"")},C=e=>B(o[e])?o[e]:S&&B(S.props[e])?S.props[e]:void 0,$=l((()=>{const e=C("readonly");if(o.clearable&&!e){const e=""!==k(),t="always"===o.clearTrigger||"focus"===o.clearTrigger&&v.focused;return e&&t}return!1})),z=l((()=>x.value&&f.input?x.value():o.modelValue)),A=()=>{v.status="unvalidated",v.validateMessage=""},T=()=>i("end-validate",{status:v.status}),M=(e=o.rules)=>new Promise((t=>{A(),e?(i("start-validate"),(e=>e.reduce(((e,t)=>e.then((()=>{if("failed"===v.status)return;let{value:e}=z;return t.formatter&&(e=t.formatter(e,t)),ye(e,t)?t.validator?xe(e,t).then((n=>{n&&"string"==typeof n?(v.status="failed",v.validateMessage=n):!1===n&&(v.status="failed",v.validateMessage=Se(e,t))})):void 0:(v.status="failed",void(v.validateMessage=Se(e,t)))}))),Promise.resolve()))(e).then((()=>{"failed"===v.status?(t({name:o.name,message:v.validateMessage}),T()):(v.status="passed",t(),T())}))):t()})),O=e=>{if(S&&o.rules){const{validateTrigger:t}=S.props,n=w(t).includes(e),l=o.rules.filter((t=>t.trigger?w(t.trigger).includes(e):n));l.length&&M(l)}},D=(e,t="onChange")=>{if(e=(e=>{const{maxlength:t}=o;if(B(t)&&Ce(e)>t){const n=k();return n&&Ce(n)===+t?n:function(e,t){return[...e].slice(0,t).join("")}(e,+t)}return e})(e),"number"===o.type||"digit"===o.type){const t="number"===o.type;e=function(e,t=!0,n=!0){e=t?q(e,".",/\./g):e.split(".")[0];const o=t?/[^-0-9.]/g:/[^-0-9]/g;return(e=n?q(e,"-",/-/g):e.replace(/-/,"")).replace(o,"")}(e,t,t)}o.formatter&&t===o.formatTrigger&&(e=o.formatter(e)),m.value&&m.value.value!==e&&(m.value.value=e),e!==o.modelValue&&i("update:modelValue",e)},W=e=>{e.target.composing||D(e.target.value)},F=()=>{var e;return null==(e=m.value)?void 0:e.blur()},H=()=>{const e=m.value;"textarea"===o.type&&o.autosize&&e&&function(e,t){const n=j();e.style.height="auto";let o=e.scrollHeight;if(P(t)){const{maxHeight:e,minHeight:n}=t;void 0!==e&&(o=Math.min(o,e)),void 0!==n&&(o=Math.max(o,n))}o&&(e.style.height=`${o}px`,L(n))}(e,o.autosize)},N=e=>{v.focused=!0,i("focus",e),u(H),C("readonly")&&F()},Z=e=>{C("readonly")||(v.focused=!1,D(k(),"onBlur"),i("blur",e),O("onBlur"),u(H),E&&L(j()))},R=e=>i("click-input",e),_=e=>i("click-left-icon",e),K=e=>i("click-right-icon",e),X=e=>{I(e),i("update:modelValue",""),i("clear",e)},Y=l((()=>"boolean"==typeof o.error?o.error:!(!S||!S.props.showError||"failed"!==v.status)||void 0)),G=l((()=>{const e=C("labelWidth");if(e)return{width:V(e)}})),J=e=>{if(13===e.keyCode){S&&S.props.submitOnEnter||"textarea"===o.type||I(e),"search"===o.type&&F()}i("keypress",e)},Q=()=>o.id||`${p}-input`,ee=()=>{const e=Be("control",[C("inputAlign"),{error:Y.value,custom:!!f.input,"min-height":"textarea"===o.type&&!o.autosize}]);if(f.input)return r("div",{class:e,onClick:R},[f.input()]);const t={id:Q(),ref:m,name:o.name,rows:void 0!==o.rows?+o.rows:void 0,class:e,disabled:C("disabled"),readonly:C("readonly"),autofocus:o.autofocus,placeholder:o.placeholder,autocomplete:o.autocomplete,enterkeyhint:o.enterkeyhint,"aria-labelledby":o.label?`${p}-label`:void 0,onBlur:Z,onFocus:N,onInput:W,onClick:R,onChange:ke,onKeypress:J,onCompositionend:ke,onCompositionstart:we};return"textarea"===o.type?r("textarea",t,null):r("input",s("number"===(n=o.type)?{type:"text",inputmode:"decimal"}:"digit"===n?{type:"tel",inputmode:"numeric"}:{type:n},t),null);var n},te=()=>{const e=f["right-icon"];if(o.rightIcon||e)return r("div",{class:Be("right-icon"),onClick:K},[e?e():r(ae,{name:o.rightIcon,classPrefix:o.iconPrefix},null)])},ne=()=>{if(o.showWordLimit&&o.maxlength){const e=Ce(k());return r("div",{class:Be("word-limit")},[r("span",{class:Be("word-num")},[e]),g("/"),o.maxlength])}},oe=()=>{if(S&&!1===S.props.showErrorMessage)return;const e=o.errorMessage||v.validateMessage;if(e){const t=f["error-message"],n=C("errorMessageAlign");return r("div",{class:Be("error-message",n)},[t?t({message:e}):e])}},le=()=>[r("div",{class:Be("body")},[ee(),$.value&&r(ae,{name:o.clearIcon,class:Be("clear"),onTouchstart:X},null),te(),f.button&&r("div",{class:Be("button")},[f.button()])]),ne(),oe()];return function(e){const t=n();t&&y(t.proxy,e)}({blur:F,focus:()=>{var e;return null==(e=m.value)?void 0:e.focus()},validate:M,formValue:z,resetValidation:A,getValidationStatus:()=>v.status}),a(h,{customValue:x,resetValidation:A,validateWithTrigger:O}),c((()=>o.modelValue),(()=>{D(k()),A(),O("onChange"),u(H)})),d((()=>{D(k(),o.formatTrigger),u(H)})),()=>{const e=C("disabled"),t=C("labelAlign"),n=(()=>{const e=C("colon")?":":"";return f.label?[f.label(),e]:o.label?r("label",{id:`${p}-label`,for:Q()},[o.label+e]):void 0})(),l=(()=>{const e=f["left-icon"];if(o.leftIcon||e)return r("div",{class:Be("left-icon"),onClick:_},[e?e():r(ae,{name:o.leftIcon,classPrefix:o.iconPrefix},null)])})();return r(he,{size:o.size,icon:o.leftIcon,class:Be({error:Y.value,disabled:e,[`label-${t}`]:t}),center:o.center,border:o.border,isLink:o.isLink,clickable:o.clickable,titleStyle:G.value,valueClass:Be("value"),titleClass:[Be("label",[t,{required:o.required}]),o.labelClass],arrowDirection:o.arrowDirection},{icon:l?()=>l:null,title:n?()=>n:null,value:le,extra:f.extra})}}})),[Te,je]=K("image");const Le=X(o({name:Te,props:{src:String,alt:String,fit:String,position:String,round:Boolean,width:k,height:k,radius:k,lazyLoad:Boolean,iconSize:k,showError:C,errorIcon:$("photo-fail"),iconPrefix:String,showLoading:C,loadingIcon:$("photo")},emits:["load","error"],setup(t,{emit:o,slots:a}){const i=e(!1),d=e(!0),g=e(),{$Lazyload:m}=n().proxy,b=l((()=>{const e={width:V(t.width),height:V(t.height)};return B(t.radius)&&(e.overflow="hidden",e.borderRadius=V(t.radius)),e}));c((()=>t.src),(()=>{i.value=!1,d.value=!0}));const h=e=>{d.value=!1,o("load",e)},y=e=>{i.value=!0,d.value=!1,o("error",e)},S=(e,n,o)=>o?o():r(ae,{name:e,size:t.iconSize,class:n,classPrefix:t.iconPrefix},null),w=()=>{if(i.value||!t.src)return;const e={alt:t.alt,class:je("img"),style:{objectFit:t.fit,objectPosition:t.position}};return t.lazyLoad?p(r("img",s({ref:g},e),null),[[v("lazy"),t.src]]):r("img",s({src:t.src,onLoad:h,onError:y},e),null)},k=({el:e})=>{const t=()=>{e===g.value&&d.value&&h()};g.value?t():u(t)},C=({el:e})=>{e!==g.value||i.value||y()};return m&&x&&(m.$on("loaded",k),m.$on("error",C),f((()=>{m.$off("loaded",k),m.$off("error",C)}))),()=>{var e;return r("div",{class:je({round:t.round}),style:b.value},[w(),d.value&&t.showLoading?r("div",{class:je("loading")},[S(t.loadingIcon,je("loading-icon"),a.loading)]):i.value&&t.showError?r("div",{class:je("error")},[S(t.errorIcon,je("error-icon"),a.error)]):void 0,null==(e=a.default)?void 0:e.call(a)])}}}));export{pe as B,Ae as F,Le as I};
